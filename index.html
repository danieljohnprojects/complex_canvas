<!DOCTYPE html>
<html>

<head>
    <title>Test</title>

    <!-- Link the JSXGraph library -->
    <script type="text/javascript" charset="UTF-8"
        src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />

</head>

<body>
    <div id="inputBox" class="jxgbox" style="width:500px; height:500px;"></div>
    <div id="outputBox" class="jxgbox" style="width:500px; height:500px;"></div>
    <script type="text/javascript">
        var inboard = JXG.JSXGraph.initBoard('inputBox', {
            boundingbox: [-5, 5, 5, -5],
            axis: true
        });
        var outboard = JXG.JSXGraph.initBoard('outputBox', {
            boundingbox: [-5, 5, 5, -5],
            axis: true
        });

        function event_coords(evt) {
            // Note that the event coordinates evt.x and evt.y are relative to the top left corner of the page, rather than the canvas. Need to use evt.layerX and evt.layerY to do it properly.
            var X = (evt.layerX - inboard.origin.scrCoords[1]) / inboard.unitX;
            var Y = (inboard.origin.scrCoords[2] - evt.layerY) / inboard.unitY;
            return [X, Y];
        }
        function complex_square(coords) {
            var X = coords[0] ** 2 - coords[1] ** 2;
            var Y = -2 * coords[0] * coords[1];
            return [X, Y];
        }


        var pcoords = [0, 0];
        var drawing = false;
        inboard.on(
            'down',
            function (evt) { pcoords = event_coords(evt); drawing = true; }
        );
        inboard.on(
            'up',
            function (evt) { drawing = false; }
        );
        inboard.on(
            'move',
            function (evt) {
                if (drawing) {
                    inboard.create('line', [pcoords, event_coords(evt)], { straightFirst: false, straightLast: false });
                    outboard.create(
                        'line', 
                        [ complex_square(pcoords), complex_square(event_coords(evt)) ], 
                        {straightFirst: false, straightLast: false });
                    pcoords = event_coords(evt);
                }
            }
        )
        // board.on(
        //     'down',
        //     function(evt) { console.log(evt) }
        // );
    </script>
</body>

</html>